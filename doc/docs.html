<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Thrones - Documentation</title>
	<link rel="icon" type="image/png" href="../rsc/data/thrones.png">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<nav>
		<img src="../rsc/textures/title.png" alt="">
		<a href="rules.html">Rules</a>
		<a href="docs.html">Docs</a>
		<div class="flim"></div>
	</nav>

	<h1>Index</h1>
	<a href="#h1_0">1 Miscellaneous</a><br>
	<a href="#h1_1" class="sindent">1.1 Dependencies</a><br>
	<a href="#h1_2" class="sindent">1.2 UI</a><br>
	<a href="#h2_0">2 Preferences</a><br>
	<a href="#h2_1" class="sindent">2.1 Settings</a><br>
	<a href="#h2_2" class="sindent">2.2 Configurations</a><br>
	<a href="#h2_3" class="sindent">2.3 Setups</a><br>
	<a href="#h3_0">3 Networking</a><br>
	<a href="#h3_1" class="sindent">3.1 Client</a><br>
	<a href="#h3_2" class="sindent">3.2 Server</a><br>
	<a href="#h0_0">4 Game</a><br>
	<a href="#h4_1" class="sindent">4.1 Setup</a><br>
	<a href="#h4_2" class="sindent">4.2 Match</a><br>

	<h1 id="h1_0">1 Miscellaneous</h1>

	<h2 id="h1_1">1.1 Dependencies</h2>
	<p>This list refers to the provided binaries, not strictly the source code.</p>
	<h3>Android</h3>
	<ul>
		<li>Android 4.4 KitKat</li>
		<li>OpenGL ES 3.0</li>
	</ul>
	<h3>Emscripten</h3>
	<ul>
		<li>WebGL 2.0</li>
	</ul>
	<h3>Linux</h3>
	<ul>
		<li>Linux 3.2.0 64-bit</li>
		<li>OpenGL 3.3 (x86/x86-64) or OpenGL ES 3.0 (ARM)</li>
		<li>FreeType</li>
		<li>libcurl</li>
		<li>libjpeg (OpenGL ES)</li>
		<li>libpng</li>
		<li>SDL2 2.0.12</li>
		<li>SDL2_image 2.0.5</li>
		<li>SDL2_ttf 2.0.15</li>
		<li>zlib</li>
	</ul>
	<h3>macOS</h3>
	<ul>
		<li>OpenGL 3.3</li>
	</ul>
	<h3>Windows</h3>
	<ul>
		<li>Windows 7</li>
		<li>OpenGL 3.3</li>
		<li>Microsoft Visual C++ Redistributable 2019</li>
	</ul>

	<h2 id="h1_2">1.2 UI</h2>
	<p>Widgets that can be interacted with or have tooltips are highlighted when the user hovers the mouse cursor over them. The "Escape" and "Back" keys always perform a given menu's "exit" action. "Return" and "Enter" perform a popup's or selection's "confirm" action.</p>
	<h3>Checkbox</h3>
	<p>Can be toggled with either the left or the right mouse button.</p>
	<h3>Scroll area</h3>
	<p>Can be scrolled with either a scroll bar on the right, the mouse wheel or by left click holding and dragging inside the area.</p>
	<h3>Slider</h3>
	<p>Most sliders' changes will be fully applied only once the dragging is done.</p>

	<h1 id="h2_0">2 Preferences</h1>
	<p>
		All preferences are stored in INI files.<br>
		If the game was built for Android or with the "EXTERNAL" define, it'll default to saving preferences outside of the game's directory.<br>
		These external locations are:
	</p>
	<table class="listing">
		<tr>
			<td>Android</td>
			<td>/storage/sdcard0/Android/data/org.duravia.thrones/files</td>
		</tr>
		<tr>
			<td>Linux</td>
			<td>~/.config/thrones</td>
		</tr>
		<tr>
			<td>macOS</td>
			<td>~/Library/Preferences/Thrones</td>
		</tr>
		<tr>
			<td>Windows</td>
			<td>%AppData%/Thrones</td>
		</tr>
	</table>
	<p>If the game was built without the "EXTERNAL" define, it'll default to saving preferences in the game's assets directory:</p>
	<table class="listing">
		<tr>
			<td>Linux/Windows</td>
			<td>Thrones/data</td>
		</tr>
		<tr>
			<td>macOS</td>
			<td>Thrones.app/Contents/Resources</td>
		</tr>
		<tr>
			<td>Web</td>
			<td>Indexed DB /data</td>
		</tr>
	</table>
	<p>Either behavior can be explicitly set by running the game with the "-e 0|1" option:</p>
	<table class="listing">
		<tr>
			<td>0</td>
			<td>don't save externally</td>
		</tr>
		<tr>
			<td>1</td>
			<td>save externally</td>
		</tr>
	</table>

	<h2 id="h2_1">2.1 Settings</h2>
	<p>Game client settings are stored in "setting.ini" and can be edited in the "Settings" menu.</p>
	<h3>Address</h3>
	<p>The server's address to connect to when clicking "Connect".</p>
	<h3>Port</h3>
	<p>The server's port to connect to when clicking "Connect".</p>
	<h3>Display</h3>
	<p>The index of what display to place the window on. Choosing a non-primary display can break the rendering on some systems.</p>
	<h3>Screen</h3>
	<table class="listing">
		<tr>
			<td>window</td>
			<td>regular decorated window</td>
		</tr>
		<tr>
			<td>borderless</td>
			<td>borderless window</td>
		</tr>
		<tr>
			<td>fullscreen</td>
			<td>fullscreen with custom mode</td>
		</tr>
		<tr>
			<td>desktop</td>
			<td>fullscreen with the standard screen mode</td>
		</tr>
	</table>
	<h3>Size</h3>
	<p>Window size when "Screen" is set to "window" or "borderless".</p>
	<h3>Mode</h3>
	<p>The screen mode to use when "Screen" is set to "fullscreen".</p>
	<h3>Multisamples</h3>
	<p>Set to "0" to turn off. Doesn't work with OpenGL ES.</p>
	<h3>Shadow resolution</h3>
	<p>The width/height of the light's shadow cubemap texture. Shadows are disabled if set to 0 or under OpenGL ES.</p>
	<h3>Soft shadows</h3>
	<p>Blur the edges of shadows.</p>
	<h3>Texture scale</h3>
	<p>Scale of texture sizes.</p>
	<h3>VSync</h3>
	<table class="listing">
		<tr>
			<td>immediate</td>
			<td>off</td>
		</tr>
		<tr>
			<td>synchronized</td>
			<td>regular on</td>
		</tr>
		<tr>
			<td>adaptive</td>
			<td>adaptive on (works on fewer systems)</td>
		</tr>
	</table>
	<h3>Gamma</h3>
	<p>Aka. brightness. Doesn't work on some systems.</p>
	<h3>Volume</h3>
	<p>Volume of sound effects. Disabled by default because the sound effects are terrible and annoying.</p>
	<h3>Color ally</h3>
	<p>Color of own pieces.</p>
	<h3>Color enemy</h3>
	<p>Color of the opponent's pieces.</p>
	<h3>Scale tiles</h3>
	<p>When enabled, the amounts of home and middle tiles will be adjusted accordingly when changing the homeland size. "New_amount_of_each_tile = old_amount * new_area / old_area", the area values referring to either the homeland area for homeland tiles or the width of the board for middle row tiles.</p>
	<h3>Scale pieces</h3>
	<p>When enabled, the amounts of a player's pieces will be adjusted accordingly when changing the homeland size. "New_amount_of_each_piece = old_amount * new_area / old_area" floored, the area values referring to the homeland area.</p>
	<h3>Show tooltips</h3>
	<p>Display widgets' tooltips when hovering over them with the cursor.</p>
	<h3>Chat line limit</h3>
	<p>Maximum number of line breaks in a chat widget.</p>
	<h3>Deadzone</h3>
	<p>Deadzone of all controllers' axes.</p>
	<h3>Resolve family</h3>
	<table class="listing">
		<tr>
			<td>any</td>
			<td>Use any family for resolving host addresses.</td>
		</tr>
		<tr>
			<td>IPv4</td>
			<td>Use only IPv4 for resolving host addresses.</td>
		</tr>
		<tr>
			<td>IPv6</td>
			<td>Use only IPv6 for resolving host addresses.</td>
		</tr>
	</table>
	<h3>Regular font</h3>
	<p>The standard font is Romanesque and the alternative is Merriweather, which supports a larger character set.</p>
	<h3>Key bindings</h3>
	<p>A table of all key bindings. The first column lists keyboard bindings, the second lists joystick bindings and the third lists gamepad bindings. A binding can be edited by left clicking the field or deleted by right clicking it. The plus buttons on the right can be used to add new key bindings.</p>
	<table class="listing">
		<tr>
			<td>Up</td>
			<td>Move the selection/cursor up. When editing text, jump to the start.</td>
		</tr>
		<tr>
			<td>Down</td>
			<td>Move the selection/cursor down. When editing text, it can be used in combination with Alt to jump to the next word end or with Ctrl to jump to the end.</td>
		</tr>
		<tr>
			<td>Left</td>
			<td>Move the selection/cursor left. When editing text, jump to the end.</td>
		</tr>
		<tr>
			<td>Right</td>
			<td>Move the selection/cursor right. When editing text, it can be used in combination with Alt to jump to the previous word start or with Ctrl to jump to the start.</td>
		</tr>
		<tr>
			<td>Text backspace</td>
			<td>Delete the left character when editing text. It can be used in combination with Alt to delete to the left word start or with Ctrl to delete everything to the left.</td>
		</tr>
		<tr>
			<td>Text delete</td>
			<td>Delete the right character when editing text. It can be used in combination with Alt to delete to the right word end or with Ctrl to delete everything to the right.</td>
		</tr>
		<tr>
			<td>Text home</td>
			<td>Move the cursor to the start when editing text.</td>
		</tr>
		<tr>
			<td>Text end</td>
			<td>Move the cursor to the end when editing text.</td>
		</tr>
		<tr>
			<td>Text paste</td>
			<td>Paste text from the clipboard when editing text. Must be used in combination with Ctrl when using a keyboard.</td>
		</tr>
		<tr>
			<td>Text copy</td>
			<td>Copy all to clipboard when editing text. Must be used in combination with Ctrl when using a keyboard.</td>
		</tr>
		<tr>
			<td>Text cut</td>
			<td>Cut all to clipboard when editing text. Must be used in combination with Ctrl when using a keyboard.</td>
		</tr>
		<tr>
			<td>Text revert</td>
			<td>Revert to the original when editing text. Must be used in combination with Ctrl when using a keyboard.</td>
		</tr>
		<tr>
			<td>Confirm</td>
			<td>Perform the current confirm action.</td>
		</tr>
		<tr>
			<td>Cancel</td>
			<td>Perform the current abort action.</td>
		</tr>
		<tr>
			<td>Finish</td>
			<td>Use the finish button.</td>
		</tr>
		<tr>
			<td>Hasten</td>
			<td>Toggle the hasten icon.</td>
		</tr>
		<tr>
			<td>Assault</td>
			<td>Toggle the assault icon.</td>
		</tr>
		<tr>
			<td>Conspire</td>
			<td>Toggle the conspire icon.</td>
		</tr>
		<tr>
			<td>Deceive</td>
			<td>Toggle the deceive icon.</td>
		</tr>
		<tr>
			<td>Move camera</td>
			<td>Toggle moving the camera with the mouse.</td>
		</tr>
		<tr>
			<td>Reset camera</td>
			<td>Reset the camera position.</td>
		</tr>
		<tr>
			<td>Engage</td>
			<td>Toggle the engage button.</td>
		</tr>
		<tr>
			<td>Delete</td>
			<td>Delete a tile or piece.</td>
		</tr>
		<tr>
			<td>Destroy hold</td>
			<td>Turn the destroy button on or off.</td>
		</tr>
		<tr>
			<td>Destroy toggle</td>
			<td>Toggle the destroy button.</td>
		</tr>
		<tr>
			<td>Surrender</td>
			<td>Use the surrender button.</td>
		</tr>
		<tr>
			<td>Chat</td>
			<td>Toggle the chat overlay.</td>
		</tr>
		<tr>
			<td>Frame counter</td>
			<td>Cycle through the frame counter overlay's modes. Those being frames per second, tick duration in ms and off.</td>
		</tr>
		<tr>
			<td>Select next</td>
			<td>Select the next icon.</td>
		</tr>
		<tr>
			<td>Select prev</td>
			<td>Select the previous icon.</td>
		</tr>
		<tr>
			<td>Select 0</td>
			<td>Select the first icon.</td>
		</tr>
		<tr>
			<td>Select 1</td>
			<td>Select the second icon.</td>
		</tr>
		<tr>
			<td>Select 2</td>
			<td>Select the third icon.</td>
		</tr>
		<tr>
			<td>Select 3</td>
			<td>Select the fourth icon.</td>
		</tr>
		<tr>
			<td>Select 4</td>
			<td>Select the fifth icon.</td>
		</tr>
		<tr>
			<td>Select 5</td>
			<td>Select the sixth icon.</td>
		</tr>
		<tr>
			<td>Select 6</td>
			<td>Select the seventh icon.</td>
		</tr>
		<tr>
			<td>Select 7</td>
			<td>Select the eighth icon.</td>
		</tr>
		<tr>
			<td>Select 8</td>
			<td>Select the ninth icon.</td>
		</tr>
		<tr>
			<td>Select 9</td>
			<td>Select the tenth icon.</td>
		</tr>
		<tr>
			<td>Camera up</td>
			<td>Move the camera up.</td>
		</tr>
		<tr>
			<td>Camera down</td>
			<td>Move the camera down.</td>
		</tr>
		<tr>
			<td>Camera left</td>
			<td>Move the camera left.</td>
		</tr>
		<tr>
			<td>Camera right</td>
			<td>Move the camera right.</td>
		</tr>
		<tr>
			<td>Scroll up</td>
			<td>Scroll the current menu's main list up.</td>
		</tr>
		<tr>
			<td>Scroll down</td>
			<td>Scroll the current menu's main list down.</td>
		</tr>
	</table>

	<h2 id="h2_2">2.2 Configurations</h2>
	<p>Game configurations are stored in "game.ini" and can be edited in the "Host" menu or when hosting a room on a server.</p>
	<h3>Victory Points</h3>
	<p>Use the victory points game variant. The input field determines how many points each player needs to collect to win. If the checkbox is set, middle row fortresses will be placed in the center. If it isn't checked, middle row fortresses will be placed in the remaining free spaces.</p>
	<h3>Ports</h3>
	<p>Use the ports game variant.</p>
	<h3>Row balancing</h3>
	<p>Use the row balancing game variant.</p>
	<h3>Homefront</h3>
	<p>Use the homefront game variant.</p>
	<h3>Set piece battle</h3>
	<p>Use the set piece Battle game variant. The input field determines how many pieces each player can use.</p>
	<h3>Homeland size</h3>
	<table class="listing">
		<tr>
			<td>width</td>
			<td>Is equal to the number of tile columns of the board. The minimum is 5 and the maximum is 101.</td>
		</tr>
		<tr>
			<td>height</td>
			<td>Is the number of tile rows of each player's homeland, which is "board_height / 2 - 1". The minimum is 2 because a fortress can't be placed in the bottom row and the maximum is 50, amounting to a maximum board height of 101.</td>
		</tr>
	</table>
	<h3>Battle win chance</h3>
	<p>Probability of winning a battle.</p>
	<h3>Fate's favor maximum</h3>
	<p>Can be set to a value in the range of 0 to 16383. Its effect is described by "Fate's favor total".</p>
	<h3>Fate's favor total</h3>
	<p>If enabled, "Favor maximum" will be the limit of how many times each player can use each type of fate's favor in one match. If disabled, "Favor maximum" will be the limit of how many of each type of fate's favor each player can stock up.</p>
	<h3>First turn engage</h3>
	<p>Controls whether players can attack or fire during their first turn.</p>
	<h3>Terrain rules</h3>
	<p>Controls whether to use terrain related rules. This setting doesn't affect the breaching of tiles or rules inherent to the pieces' movement range.</p>
	<h3>Dragon place late</h3>
	<p>If enabled, dragons don't have to be placed during setup and can be placed later on homeland fortresses during the match.</p>
	<h3>Dragon move straight</h3>
	<p>If enabled, a dragon can only move in a straight line. Otherwise one move's steps will be treated separately and the dragon will use the shortest path to a destination.</p>
	<h3>Capturers</h3>
	<p>A list of pieces which will be able to capture a fortress. If the list is empty, it'll be filled with all piece types.</p>
	<h3>Homeland tiles</h3>
	<p>A list of the amounts of each player's homeland tiles. The minimum amount for each tile type other than a fortress is the homeland height and the maximum of each is the number of remaining free tiles. Sliders' ranges are set accordingly. The amount of fortresses is set to the amount of the remaining free tiles on a homeland. The number of fortresses is limited to "homeland_height * 2 + board_width - 2" and when exceeded, other tile amounts will be increased with the priority being the order of the listed tile types.</p>
	<h3>Fortresses captured</h3>
	<p>The number of enemy fortresses that need to be captured in order to win. This value is limited to the number of homeland fortresses.</p>
	<h3>Middle tiles</h3>
	<p>A list of the amounts of middle row tiles per player. The total amount is limited to the range of 0 to "board_width / 2" floored. The amount of fortresses is set to the amount of the remaining free tiles, that is "board_width - total_amount_of_tiles_per_player * 2". The sliders work like the homeland tile amount sliders.</p>
	<h3>Pieces</h3>
	<p>A list of the amounts of each piece type per player. The total amount of pieces is limited to the range of 1 to the homeland tile count. If there's 0 pieces, the amount of thrones will be set to 1. The sliders work like the tile amount sliders.</p>
	<h3>Thrones killed</h3>
	<p>The number of enemy thrones that need to be killed in order to win. This number is limited to the number of a player's thrones. If both winning conditions are set to 0, this one will be set to 1. If the amount of thrones is set to 0, it'll be incremented and if the piece limit has been reached, one other piece amount will be decremented in turn, the priority being the reverse order of the listed piece types.</p>

	<h2 id="h2_3">2.3 Setups</h2>
	<p>
		Game setups are stored in "setup.ini" and can be edited, saved and loaded in the "Host -&gt; Setup" menu or during the in-game setup phase. The offline editor works the same as setting up a game online, except any checks for proper tile and piece placement will be ignored.<br>
		When loading a setup, it only overwrites the current tiles/pieces of each stage when the loaded setup's corresponding stages' tile/piece data is present.<br>
		The same setup can be loaded for different configurations, but some tiles and pieces may not get placed due to exceeding limits.
	</p>

	<h1 id="h3_0">3 Networking</h1>

	<h2 id="h3_1">3.1 Client</h2>
	<p>
		A game client can be used as a server by going into the "Host" menu, optionally setting an appropriate port and the configuration that'll be used for the game rules, and clicking "Open". Once another client successfully connects to the server, a game will start immediately.<br>
		A client can set an address and port of a server and connect by clicking the "Connect" button in the main menu. When connecting to a regular server program, a list of open rooms will be displayed. A room can be joined by left clicking its name or a new one can be created by clicking "Host". Only a room's host can edit the configuration and start the game.<br>
	</p>

	<h2 id="h3_2">3.2 Server</h2>
	<p>
		The server program can be used to host multiple players. The maximum number of rooms is the limit of players halved and rounded up.<br>
		If the program has been compiled without the "SERVICE" define, the following keys can be used when running it in the foreground:
	</p>
	<table class="listing">
		<tr>
			<td>P</td>
			<td>list players</td>
		</tr>
		<tr>
			<td>R</td>
			<td>list rooms</td>
		</tr>
		<tr>
			<td>Q</td>
			<td>quit program</td>
		</tr>
	</table>

	<p>Command line arguments:</p>
	<table class="listing">
		<tr>
			<td>-p &lt;port&gt;</td>
			<td>port to use (default is 39741)</td>
		</tr>
		<tr>
			<td>-4</td>
			<td>resolve host only with IPv4 family (default is unspec)</td>
		</tr>
		<tr>
			<td>-6</td>
			<td>resolve host only with IPv6 family (default is unspec)</td>
		</tr>
		<tr>
			<td>-c &lt;number&gt;</td>
			<td>maximum number of connected players (default is 1024)</td>
		</tr>
		<tr>
			<td>-v</td>
			<td>write output to console</td>
		</tr>
		<tr>
			<td>-l &lt;directory&gt;</td>
			<td>write output to log files in the specified directory</td>
		</tr>
		<tr>
			<td>-m &lt;number&gt;</td>
			<td>set the maximum number of kept log files (default is 8)</td>
		</tr>
	</table>

	<h1 id="h4_0">4 Game</h1>
	<p>Every game starts with the setup stage where players place their tiles and pieces. Once both players confirm their setups, the actual match starts.</p>

	<h2 id="h4_1">4.1 Setup</h2>
	<p>
		The setup stage is a sequence of three phases of placing homeland tiles, middle row tiles and pieces.<br>
		Tiles/pieces can be placed by selecting an icon in the bottom panel and left click holding on a free tile and optionally dragging the cursor across other occupied tiles to replace them. A type can be selected by pressing the icon, using the mouse wheel or pressing a number key.<br>
		It's possible to drag a tile/piece with the left mouse button and place it somewhere else or switch places with another. Tiles/pieces can be removed by using the "Delete" button or right click holding on them and optionally dragging the cursor across other ones.<br>
		Fortress tiles will be placed automatically, where no tiles were placed.<br>
		After the setup the middle row tiles will be rearranged if necessary and the match starts.
	</p>
	<h3>Buttons</h3>
	<table class="listing">
		<tr>
			<td>Exit</td>
			<td>Exit the game.</td>
		</tr>
		<tr>
			<td>Config</td>
			<td>View the current game configuration.</td>
		</tr>
		<tr>
			<td>Save</td>
			<td>Save current setup.</td>
		</tr>
		<tr>
			<td>Load</td>
			<td>Load a setup.</td>
		</tr>
		<tr>
			<td>Chat</td>
			<td>Toggle the chat overlay.</td>
		</tr>
		<tr>
			<td>Delete</td>
			<td>When selected, the left mouse button will remove tiles/pieces instead of placing them.</td>
		</tr>
		<tr>
			<td>Back</td>
			<td>Go to the previous phase.</td>
		</tr>
		<tr>
			<td>Next</td>
			<td>Go to the next phase.</td>
		</tr>
		<tr>
			<td>Finish</td>
			<td>Confirm setup and wait for the other player.</td>
		</tr>
	</table>

	<h2 id="h4_2">4.2 Match</h2>
	<p>
		Pieces can be moved by dragging them with the left mouse button.<br>
		Pieces can attack or fire by dragging them with the right mouse button or using the "Engage" button.<br>
		A turn ends by pressing the according button or when the limit of actions has been reached.<br>
	</p>
	<h3>Buttons</h3>
	<table class="listing">
		<tr>
			<td>Exit</td>
			<td>Exit the game.</td>
		</tr>
		<tr>
			<td>Surrender</td>
			<td>Surrender to the opponent. If playing on a multi-room server, this button will just finish the match, rather than abort it and exit the room.</td>
		</tr>
		<tr>
			<td>Config</td>
			<td>View the current game configuration.</td>
		</tr>
		<tr>
			<td>Chat</td>
			<td>Toggle the chat overlay.</td>
		</tr>
		<tr>
			<td>Engage</td>
			<td>When selected, the left mouse button will perform what the right mouse button would do.</td>
		</tr>
		<tr>
			<td>Destroy</td>
			<td>When selected and moving a rangers piece off a forest tile, that tile will be turned into plains.</td>
		</tr>
		<tr>
			<td>Finish</td>
			<td>End the turn. Disabled for the first action of a turn.</td>
		</tr>
		<tr>
			<td>Establish</td>
			<td>Establish a farm or city.</td>
		</tr>
		<tr>
			<td>Rebuild</td>
			<td>Rebuild a breached/destroyed fortress/farm.</td>
		</tr>
		<tr>
			<td>Spawn</td>
			<td>Respawn a piece on the according tile.</td>
		</tr>
		<tr>
			<td>Fate's favor icons</td>
			<td>An icon can be selected to start a fate's favor and deselected to abort or finish it.</td>
		</tr>
		<tr>
			<td>Dragon icon</td>
			<td>If during the setup stage a dragon wasn't placed, this icon can be dragged onto a homeland fortress to place said piece.</td>
		</tr>
	</table>
</body>
</html>
